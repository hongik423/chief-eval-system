# PRD: 기업의별 치프인증 평가 시스템 v1.0

## 1. 제품 개요

### 1.1 목적
기업의별(Stellain) 세무 컨설팅 플랫폼에서 ASSO(Associate) → 치프(Chief/PM) 인증 평가를 
디지털화하여 평가위원의 점수 입력, 데이터 추적, 합격 판정을 웹 기반으로 수행하는 시스템.

### 1.2 이해관계자
| 역할 | 담당자 | 시스템 역할 |
|------|--------|------------|
| 프로젝트 PM | 이후경 HRD 실장 | 관리자 - 전체 현황 관리, 합격 판정 |
| 평가위원장 | 나동환 대표 | 평가위원 - 점수 입력 |
| 평가위원 6명 | 권영도, 권오경, 김홍, 박성현, 윤덕상, 하상현 | 평가위원 - 점수 입력 |
| 역량강화 코치 | 하상현 수석 | 가점 평가 (10점) |
| 응시자 4명 | 김민경, 김창곤, 백진영, 양현호 | 피평가자 (시스템 접근 불가) |

### 1.3 핵심 지표
- 평가위원 7명 × 응시자 4명 = 최대 28개 평가 세션 (동일팀 제외 후 ~24개)
- 세션당 9개 항목 점수 입력
- 합격 기준: 평균 70점 이상 (110점 만점)

---

## 2. 기능 요구사항

### 2.1 현재 구현 완료 (v1.0)

#### F1. 로그인 시스템
- [x] 평가위원 7명 선택 로그인
- [x] 관리자(이후경 PM) 로그인
- [ ] 비밀번호/PIN 인증 (미구현 - 현재 선택만으로 입장)

#### F2. 평가위원 기능
- [x] 응시자 목록 확인 (동일팀 제외 표시)
- [x] 9개 항목별 점수 입력 (실시간 자동 저장)
- [x] 영역별 소계 및 총점 실시간 계산
- [x] 종합 코멘트 작성
- [x] 평가 완료 저장
- [x] 나의 평가 진행률 표시

#### F3. 관리자 기능
- [x] 현황 요약 대시보드 (합격/불합격 카운트)
- [x] 가점 입력 (역량강화교육 이수, 최대 10점)
- [x] 응시자별 상세 - 평가위원별 점수 테이블
- [x] 합격/불합격 판정 버튼
- [x] 평가위원별 진행률 현황
- [x] 평가표 항목 수정/추가 (동적 구조)
- [x] 데이터 추적 - audit log 조회
- [x] 전체 데이터 초기화

#### F4. 데이터 관리
- [x] Supabase PostgreSQL 연동
- [x] localStorage fallback
- [x] audit_log 자동 기록 (DB trigger)
- [x] Vercel 배포 설정

---

### 2.2 향후 개발 필요 기능 (v1.1 ~ v2.0)

#### P1 (높은 우선순위)
- [ ] **인증/보안**: 평가위원별 PIN 코드 또는 비밀번호 로그인
- [ ] **PDF 내보내기**: 응시자별 평가 결과서 PDF 생성 및 다운로드
- [ ] **실시간 동기화**: Supabase Realtime으로 평가위원 간 실시간 진행률 공유
- [ ] **평가 잠금**: 평가 완료 후 수정 불가 처리 (관리자만 잠금 해제)

#### P2 (중간 우선순위)
- [ ] **알림**: 평가 미완료 위원에게 리마인더 (이메일/카카오)
- [ ] **대시보드 강화**: 차트 시각화 (레이더 차트, 바 차트)
- [ ] **엑셀 내보내기**: 전체 평가 데이터 XLSX 다운로드
- [ ] **응시자 뷰**: 응시자 본인이 결과(합격 여부만) 확인 가능한 페이지
- [ ] **다회차 지원**: 여러 평가 기간(2026 2기, 3기...) 선택 및 비교

#### P3 (낮은 우선순위)
- [ ] **모바일 최적화**: 태블릿/모바일 반응형 레이아웃 강화
- [ ] **다국어**: 영문 UI 지원
- [ ] **역할 기반 접근제어**: Supabase Auth + RLS 프로덕션 보안
- [ ] **이메일 발송**: 합격/불합격 결과 이메일 자동 발송

---

## 3. 데이터 모델

### 3.1 핵심 테이블 관계
```
eval_periods (1) ──→ (N) candidates
eval_periods (1) ──→ (N) eval_criteria_sections
eval_criteria_sections (1) ──→ (N) eval_criteria_items
eval_periods (1) ──→ (N) evaluation_sessions
evaluators (1) ──→ (N) evaluation_sessions
candidates (1) ──→ (N) evaluation_sessions
evaluation_sessions (1) ──→ (N) evaluation_scores
eval_criteria_items (1) ──→ (N) evaluation_scores
candidates (1) ──→ (1) bonus_scores (per period)
```

### 3.2 점수 산정 로직
```
유효 평가위원 = 전체 평가위원 - 동일팀 위원
최종 평균 = (Σ 유효위원_PM점수 + 가점) ÷ 유효 평가위원 수
합격 = 최종 평균 ≥ 70
```

### 3.3 감사 추적
- evaluation_scores의 모든 INSERT/UPDATE/DELETE → audit_log 자동 기록
- evaluation_sessions의 UPDATE → audit_log 자동 기록
- audit_log: old_data(JSONB), new_data(JSONB), performed_at, table_name

---

## 4. 비기능 요구사항

### 4.1 성능
- 첫 로딩: 2초 이내
- 점수 저장 응답: 500ms 이내
- 동시 접속: 최대 10명 (평가위원 7명 + 관리자 1명 + 여유)

### 4.2 배포
- Vercel: 자동 빌드 + CDN
- 환경변수: VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY

### 4.3 브라우저 지원
- Chrome 90+, Safari 15+, Edge 90+
- 모바일: iOS Safari, Android Chrome

---

## 5. 평가 일정 (2026년 2기)

| 날짜 | 마일스톤 |
|------|----------|
| 2/12 (목) | 공고 발표 |
| 2/20 (금) | 지원 마감 |
| 2/23 (월) | 평가제도 안내 + 역량강화 코칭 시작 |
| 2/26 (목) | 1차 출제 - TEST RED 9문제 |
| 3/18 (수) | 2차 출제 - 최종 3문제 배정 |
| 3/28 (토) | **TEST RED 평가일** (오전 인터뷰 / 오후 PT) |
| 3/31 (화) | 결과 발표 |
| 4월 TAG일 | 인증서 수여식 |

---

## 6. 기술 결정사항

| 항목 | 선택 | 이유 |
|------|------|------|
| 프레임워크 | React + Vite | 빠른 빌드, Vercel 최적 호환 |
| 스타일 | Tailwind CSS | 유틸리티 기반, 빠른 개발 |
| 상태관리 | Zustand | 가볍고 보일러플레이트 최소 |
| DB | Supabase | 무료 티어, 실시간 가능, PostgreSQL |
| 배포 | Vercel | 무료 티어, Git 연동 자동 배포 |
| 인증 | 선택 기반 (v1) | 소규모 내부 사용, 빠른 개발 우선 |
